<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <link rel="stylesheet" href="MainPage.css">
</head>
<body>
    <nav class="nav">
        <ul class="navLinks">
            <li><a href="MainPage.html">Home</a></li>
            <li><a href="CreatePost.html">Posts</a></li>
            <li><a href="AccountPage.html">Profile</a></li>
        </ul>
        <form class="searchForm" action="searchResultsPage.html" method="GET">
            <label>
                <textarea class="searchInput" name="search" placeholder="Search..."></textarea>
            </label>
            <button type="submit" class="searchButton">Go</button>
        </form>
    </nav>

    <div class="main-container">
        <aside class="left-column">
            <li><a href="ViewPost.html?postId=8"><h3>Topics List 1</h3></a></li>
        </aside>

 
        <section class="form-container">
            <h2>Posts</h2>
            <ul class="posts-list">
                
                <li><a href="ViewPost.html?postId=8"><h3>Post1 Title Here</h3></a></li>
                <li><a href="ViewPost.html?postId=8"><h3>Post2 Title Here</h3></a></li>
                
            </ul>
        </section>

        <aside class="right-column">
        </aside>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    fetchPosts();
});

function fetchPosts() {
    fetch('FetchPosts.php') 
    .then(response => response.json())
    .then(data => {
        if(data.error) {
            console.error('Error fetching posts:', data.error);
            return;
        }
        const postsList = document.querySelector('.posts-list');
        postsList.innerHTML = ''; // Clear current list

        data.posts.forEach(post => {
            const postItem = document.createElement('li'); // TODO: change to its own formatting 
            postItem.className = 'comment'; // Using 'comment' class for styling from view post
            postItem.innerHTML = `<a href="ViewPost?postId=${post.postId}"><h3>${post.headline}</h3></a>`;
            postsList.appendChild(postItem);
        });
    })
    .catch(error => console.error('Error fetching posts:', error));
}
    </script>
</body>
</html>
